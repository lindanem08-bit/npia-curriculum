<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>áœá·á‘áŸ’á™á¶áŸáŸ’áá¶á“á‡á¶áá·á–á á»á”á…áŸ’á…áŸá€á‘áŸáŸá¢á„áŸ’á‚áš - NPIA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --npia-blue: #1e3a8a;
            --npia-gold: #fbbf24;
        }
        body { 
            font-family: 'Kantumruy Pro', sans-serif; 
            background-color: #f8fafc;
        }
        .lesson-card {
            transition: all 0.3s ease;
            border-left: 6px solid var(--npia-blue);
        }
        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .glass-header { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px); 
            border-bottom: 3px solid var(--npia-gold);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 10px;
        }
        /* Modal Style */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Password Modal -->
    <div id="passwordModal" class="modal-overlay items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] p-8 w-full max-w-sm shadow-2xl animate-in fade-in zoom-in duration-300">
            <h3 class="text-xl font-black text-blue-950 mb-4 text-center">á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹áŸá·á‘áŸ’á’á·á‚áŸ’ášá¼</h3>
            <p class="text-slate-500 text-sm mb-6 text-center">áŸá¼á˜á”á‰áŸ’á…á¼á›á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹áŠá¾á˜áŸ’á”á¸á…á¼á›á‘áŸ…á€á¶á“áŸ‹ášá”áŸ€á”á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„</p>
            <input type="password" id="pwdInput" class="w-full p-4 bg-slate-100 border-none rounded-2xl mb-4 text-center text-lg tracking-widest outline-none focus:ring-2 ring-blue-500" placeholder="â€¢â€¢â€¢â€¢">
            <div class="flex gap-3">
                <button onclick="closeModal('passwordModal')" class="flex-1 py-3 bg-slate-100 text-slate-500 font-bold rounded-xl">á”áŸ„áŸ‡á”á„áŸ‹</button>
                <button onclick="checkPassword()" class="flex-1 py-3 bg-blue-900 text-white font-bold rounded-xl shadow-lg hover:bg-blue-800">á™á›áŸ‹á–áŸ’ášá˜</button>
            </div>
        </div>
    </div>

    <!-- Submit Assignment Modal -->
    <div id="submitModal" class="modal-overlay items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] p-8 w-full max-w-md shadow-2xl animate-in fade-in zoom-in duration-300">
            <h3 class="text-xl font-black text-blue-950 mb-4 text-center">á”áŸ’ášá‚á›áŸ‹á€á·á…áŸ’á…á€á¶ášá•áŸ’á‘áŸ‡</h3>
            <p id="submitInfo" class="text-slate-500 text-sm mb-6 text-center italic"></p>
            
            <input type="hidden" id="submitAssignmentId">
            <input type="hidden" id="submitLessonId">

            <div class="space-y-4">
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2 mb-1">á¢ááŸ’áá›áŸááŸá·áŸáŸ’áŸ (Student ID)</label>
                    <input type="text" id="studentId" class="w-full p-4 bg-slate-50 border-none rounded-2xl outline-none focus:ring-2 ring-blue-500" placeholder="á”á‰áŸ’á…á¼á›á¢ááŸ’áá›áŸá (á§. ID-001)">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2 mb-1">áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ</label>
                    <input type="text" id="studentName" class="w-full p-4 bg-slate-50 border-none rounded-2xl outline-none focus:ring-2 ring-blue-500" placeholder="á”á‰áŸ’á‡á¼á›áˆáŸ’á˜áŸ„áŸ‡ášá”áŸáŸ‹á¢áŸ’á“á€">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2 mb-1">Link á€á·á…áŸ’á…á€á¶áš (Google Drive/GitHub/...)</label>
                    <input type="url" id="assignmentUrl" class="w-full p-4 bg-slate-50 border-none rounded-2xl outline-none focus:ring-2 ring-blue-500" placeholder="https://...">
                </div>
            </div>

            <div class="flex gap-3 mt-8">
                <button onclick="closeModal('submitModal')" class="flex-1 py-3 bg-slate-100 text-slate-500 font-bold rounded-xl">á”áŸ„áŸ‡á”á„áŸ‹</button>
                <button onclick="processSubmission()" class="flex-1 py-3 bg-blue-900 text-white font-bold rounded-xl shadow-lg hover:bg-blue-800">á•áŸ’á‰á¾á€á·á…áŸ’á…á€á¶áš</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass-header sticky top-0 z-50 px-4 py-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <img src="https://npia.edu.kh/wp-content/uploads/2021/04/Logo-NPIA-Original-1.png" alt="NPIA" class="h-14 w-auto">
                <div>
                    <h1 class="text-xl font-black text-blue-900 leading-none">áœá·á‘áŸ’á™á¶áŸáŸ’áá¶á“á‡á¶áá·á–á á»á”á…áŸ’á…áŸá€á‘áŸáŸá¢á„áŸ’á‚áš</h1>
                    <span class="text-[11px] font-bold text-blue-600 uppercase tracking-wider">National Polytechnic Institute of Angkor</span>
                </div>
            </div>
            <div class="flex gap-2">
                <button id="viewToggle" onclick="handleToggleRequest()" class="px-4 py-2 bg-blue-900 text-white rounded-xl text-xs font-bold shadow-lg hover:bg-blue-800 transition-all">ášá”áŸ€á”á‚áŸ’ášá¼á”á„áŸ’ášáŸ€á“</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        
        <!-- Teacher Dashboard -->
        <section id="teacherSection" class="hidden mb-12 animate-fade-in">
            <div class="bg-white rounded-[2rem] p-6 shadow-xl border border-blue-50">
                <h2 class="text-xl font-black text-blue-950 mb-6 flex items-center gap-2">
                    <span class="bg-blue-100 p-2 rounded-lg text-lg">ğŸ“</span> á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„á˜á¶áá·á€á¶á˜áŸášáŸ€á“
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="space-y-4">
                        <label class="block text-xs font-bold text-slate-500 uppercase">á”áŸ’ášá—áŸá‘á˜á¶áá·á€á¶</label>
                        <select id="dataType" onchange="toggleInputs()" class="w-full p-4 bg-slate-50 border rounded-2xl focus:ring-2 ring-blue-500 outline-none font-bold">
                            <option value="lesson">ğŸ“š á˜áŸášáŸ€á“ááŸ’á˜á¸</option>
                            <option value="assignment">ğŸ“‚ á€á·á…áŸ’á…á€á¶ášá•áŸ’á‘áŸ‡</option>
                            <option value="score">ğŸ† á”á‰áŸ’á…á¼á›á–á·á“áŸ’á‘á»</option>
                        </select>
                    </div>

                    <div class="space-y-4 md:col-span-2">
                        <label class="block text-xs font-bold text-slate-500 uppercase">á…áŸ†áá„á‡á¾á„ / áˆáŸ’á˜áŸ„áŸ‡</label>
                        <input type="text" id="dataTitle" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none" placeholder="á”á‰áŸ’á…á¼á›á…áŸ†áá„á‡á¾á„á˜áŸášáŸ€á“ á¬ áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ...">
                    </div>

                    <div class="space-y-4 md:col-span-1" id="parentLessonGroup">
                        <label class="block text-xs font-bold text-slate-500 uppercase">áŸáŸ’áá·áá€áŸ’á“á»á„á˜áŸášáŸ€á“</label>
                        <select id="parentLesson" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none font-medium"></select>
                    </div>

                    <div class="space-y-4 md:col-span-1" id="scoreGroup">
                        <label class="block text-xs font-bold text-slate-500 uppercase">á–á·á“áŸ’á‘á» (áŸ -áŸ¡áŸ áŸ )</label>
                        <input type="number" id="dataScore" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none" placeholder="100">
                    </div>

                    <div class="space-y-4 md:col-span-1" id="linkGroup">
                        <label class="block text-xs font-bold text-slate-500 uppercase">Link á¯á€áŸá¶áš (URL)</label>
                        <input type="url" id="dataLink" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none" placeholder="https://...">
                    </div>

                    <div class="md:col-span-3 flex justify-end gap-3 mt-4">
                        <button onclick="clearForm()" class="px-6 py-3 bg-slate-100 text-slate-500 font-bold rounded-xl">áŸá˜áŸ’á¢á¶á</button>
                        <button onclick="saveData()" class="px-10 py-3 bg-blue-900 text-white font-bold rounded-xl shadow-lg">ášá€áŸ’áŸá¶á‘á»á€</button>
                    </div>
                </div>

                <!-- New Delete Section -->
                <div id="manageList" class="mt-8 pt-8 border-t border-blue-100">
                    <h3 class="text-lg font-black text-red-500 mb-4 flex items-center gap-2">
                        <span class="bg-red-50 p-2 rounded-lg text-lg">ğŸ—‘ï¸</span> áá¶ášá¶á„á›á»á”á˜áŸášáŸ€á“ (Manage & Delete)
                    </h3>
                    <div class="bg-slate-50 rounded-2xl p-4 max-h-60 overflow-y-auto custom-scrollbar">
                        <table class="w-full text-left border-collapse">
                            <thead>
                                <tr class="text-xs font-bold text-slate-400 uppercase border-b border-slate-200">
                                    <th class="pb-2">áˆáŸ’á˜áŸ„áŸ‡á˜áŸášáŸ€á“/á€á·á…áŸ’á…á€á¶áš</th>
                                    <th class="pb-2">á”áŸ’ášá—áŸá‘</th>
                                    <th class="pb-2 text-right">áŸá€á˜áŸ’á˜á—á¶á–</th>
                                </tr>
                            </thead>
                            <tbody id="manageTableBody" class="text-sm">
                                <!-- Items will be injected here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Student View Header -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            <div>
                <h2 class="text-3xl font-black text-blue-950 uppercase tracking-tight leading-tight">á˜á¶áá·á€á¶á˜áŸášáŸ€á“</h2>
                <p class="text-blue-600 font-bold text-sm tracking-wider uppercase opacity-70">Lesson Content</p>
            </div>
            <div class="relative w-full md:w-80">
                <input type="text" id="search" onkeyup="render()" class="w-full p-4 pl-12 rounded-2xl border-none shadow-md outline-none focus:ring-2 ring-blue-500" placeholder="áŸáŸ’áœáŸ‚á„ášá€á˜áŸášáŸ€á“...">
                <span class="absolute left-4 top-4 opacity-30 text-xl">ğŸ”</span>
            </div>
        </div>

        <!-- Content Area -->
        <div id="lessonContainer" class="grid grid-cols-1 gap-8">
            <!-- Content injected here -->
        </div>

    </main>

    <script>
        const TEACHER_PASSWORD = "1234";

        let lessons = JSON.parse(localStorage.getItem('npia_lessons')) || [];
        let subData = JSON.parse(localStorage.getItem('npia_subdata')) || []; 
        let isTeacher = false;

        function handleToggleRequest() {
            if (isTeacher) {
                toggleView();
            } else {
                document.getElementById('passwordModal').style.display = 'flex';
                document.getElementById('pwdInput').focus();
            }
        }

        function closeModal(id) {
            document.getElementById(id).style.display = 'none';
            if(id === 'passwordModal') document.getElementById('pwdInput').value = '';
        }

        function checkPassword() {
            if (document.getElementById('pwdInput').value === TEACHER_PASSWORD) {
                closeModal('passwordModal');
                toggleView();
            } else {
                alert("á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹á˜á·á“ááŸ’ášá¹á˜ááŸ’ášá¼áœá‘áŸ!");
                document.getElementById('pwdInput').value = '';
            }
        }

        function toggleView() {
            isTeacher = !isTeacher;
            document.getElementById('teacherSection').classList.toggle('hidden');
            document.getElementById('viewToggle').innerText = isTeacher ? "ášá”áŸ€á”áŸá·áŸáŸ’áŸ" : "ášá”áŸ€á”á‚áŸ’ášá¼á”á„áŸ’ášáŸ€á“";
            document.getElementById('viewToggle').className = isTeacher ? 
                "px-4 py-2 bg-amber-500 text-white rounded-xl text-xs font-bold shadow-lg" : 
                "px-4 py-2 bg-blue-900 text-white rounded-xl text-xs font-bold shadow-lg";
            
            if(isTeacher) {
                updateParentDropdown();
                renderTeacherList();
            }
            render();
        }

        function toggleInputs() {
            const type = document.getElementById('dataType').value;
            document.getElementById('parentLessonGroup').style.display = (type === 'lesson') ? 'none' : 'block';
            document.getElementById('scoreGroup').style.display = (type === 'score') ? 'block' : 'none';
            document.getElementById('linkGroup').style.display = (type === 'score') ? 'none' : 'block';
        }

        function updateParentDropdown() {
            const select = document.getElementById('parentLesson');
            select.innerHTML = lessons.length === 0 ? `<option value="">-- áŸá¼á˜á”á„áŸ’á€á¾áá˜áŸášáŸ€á“áŸá·á“ --</option>` : 
                               lessons.map(l => `<option value="${l.id}">${l.title}</option>`).join('');
        }

        function saveData() {
            const type = document.getElementById('dataType').value;
            const title = document.getElementById('dataTitle').value.trim();
            const link = document.getElementById('dataLink').value.trim();
            const parentId = document.getElementById('parentLesson').value;
            const score = document.getElementById('dataScore').value;

            if (!title) return alert("áŸá¼á˜á”á‰áŸ’á…á¼á›á…áŸ†áá„á‡á¾á„!");

            if (type === 'lesson') {
                lessons.push({ id: Date.now(), title, link: link || '#', date: new Date().toLocaleDateString('km-KH') });
                localStorage.setItem('npia_lessons', JSON.stringify(lessons));
            } else {
                if (!parentId) return alert("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá˜áŸášáŸ€á“á˜áŸ!");
                subData.push({ id: Date.now(), parentId: parseInt(parentId), type, title, link: link || '#', score, date: new Date().toLocaleDateString('km-KH') });
                localStorage.setItem('npia_subdata', JSON.stringify(subData));
            }
            clearForm(); 
            updateParentDropdown(); 
            renderTeacherList(); 
            render();
        }

        function deleteItem(id, listType) {
            if (!confirm("áá¾á¢áŸ’á“á€á”áŸ’ášá¶á€áŠáá¶á…á„áŸ‹á›á»á”? á”á¾á›á»á”á˜áŸášáŸ€á“ á‘á·á“áŸ’á“á“áŸá™á€á·á…áŸ’á…á€á¶ášá€áŸ’á“á»á„á“áŸ„áŸ‡á€áŸá“á¹á„á”á¶ááŸ‹áŠáŸ‚ášáŸ”")) return;
            if (listType === 'lesson') {
                lessons = lessons.filter(l => l.id !== id);
                subData = subData.filter(s => s.parentId !== id);
                localStorage.setItem('npia_lessons', JSON.stringify(lessons));
            } else {
                subData = subData.filter(s => s.id !== id);
            }
            localStorage.setItem('npia_subdata', JSON.stringify(subData));
            renderTeacherList();
            render();
        }

        function renderTeacherList() {
            const tbody = document.getElementById('manageTableBody');
            tbody.innerHTML = '';

            // Combine lessons and subData for the list, or just show lessons and expand?
            // Let's list everything flat for easy deletion
            
            // 1. Lessons
            lessons.forEach(l => {
                const tr = document.createElement('tr');
                tr.className = "border-b border-slate-100 hover:bg-white transition-colors";
                tr.innerHTML = `
                    <td class="py-3 font-bold text-blue-900">${l.title}</td>
                    <td class="py-3"><span class="bg-blue-100 text-blue-800 text-[10px] px-2 py-1 rounded-md font-bold">á˜áŸášáŸ€á“á˜áŸ</span></td>
                    <td class="py-3 text-right">
                        <button onclick="deleteItem(${l.id}, 'lesson')" class="bg-red-50 text-red-500 hover:bg-red-500 hover:text-white px-3 py-1.5 rounded-lg text-xs font-bold transition-all">á›á»á”á…áŸ„á›</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // 2. Sub Items (Assignments/Scores)
            subData.forEach(s => {
                const tr = document.createElement('tr');
                tr.className = "border-b border-slate-100 hover:bg-white transition-colors";
                const typeLabel = s.type === 'assignment' ? '<span class="bg-amber-100 text-amber-800 text-[10px] px-2 py-1 rounded-md font-bold">á€á·á…áŸ’á…á€á¶áš</span>' : '<span class="bg-green-100 text-green-800 text-[10px] px-2 py-1 rounded-md font-bold">á–á·á“áŸ’á‘á»</span>';
                tr.innerHTML = `
                    <td class="py-3 pl-4 text-slate-600">â†³ ${s.title}</td>
                    <td class="py-3">${typeLabel}</td>
                    <td class="py-3 text-right">
                        <button onclick="deleteItem(${s.id}, 'sub')" class="text-red-400 hover:text-red-600 text-xs font-bold underline">á›á»á”</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            if(lessons.length === 0 && subData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="3" class="text-center py-4 text-slate-400 italic">á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á‘á·á“áŸ’á“á“áŸá™</td></tr>';
            }
        }

        function openSubmitModal(lessonId, assignmentId, assignmentTitle) {
            document.getElementById('submitModal').style.display = 'flex';
            document.getElementById('submitInfo').innerText = `á€á·á…áŸ’á…á€á¶ášáŸ– ${assignmentTitle}`;
            document.getElementById('submitLessonId').value = lessonId;
            document.getElementById('submitAssignmentId').value = assignmentId;
        }

        function processSubmission() {
            const sid = document.getElementById('studentId').value.trim();
            const name = document.getElementById('studentName').value.trim();
            const url = document.getElementById('assignmentUrl').value.trim();
            const parentId = document.getElementById('submitLessonId').value;
            const assignTitle = document.getElementById('submitInfo').innerText;

            if(!name || !url || !sid) return alert("áŸá¼á˜á”áŸ†á–áŸá‰ á¢ááŸ’áá›áŸá, áˆáŸ’á˜áŸ„áŸ‡ á“á·á„ Link á±áŸ’á™á”á¶á“ááŸ’ášá¹á˜ááŸ’ášá¼áœ!");

            // In a real app, this sends to server. Here we save to subData as a 'score' item (pending)
            subData.push({
                id: Date.now(),
                parentId: parseInt(parentId),
                type: 'score',
                title: `[ID:${sid}] ${name} (á”áŸ’ášá‚á›áŸ‹áŸ– ${assignTitle.replace('á€á·á…áŸ’á…á€á¶ášáŸ– ', '')})`,
                link: url,
                score: 'ášá„áŸ‹á…á¶áŸ†á–á·á“á·ááŸ’á™',
                date: new Date().toLocaleDateString('km-KH')
            });
            
            localStorage.setItem('npia_subdata', JSON.stringify(subData));
            alert("á€á·á…áŸ’á…á€á¶ášášá”áŸáŸ‹á¢áŸ’á“á€ááŸ’ášá¼áœá”á¶á“á•áŸ’á‰á¾á‡á¼á“á‚áŸ’ášá¼á á¾á™!");
            closeModal('submitModal');
            document.getElementById('studentId').value = '';
            document.getElementById('studentName').value = '';
            document.getElementById('assignmentUrl').value = '';
            render();
        }

        function clearForm() {
            document.getElementById('dataTitle').value = '';
            document.getElementById('dataLink').value = '';
            document.getElementById('dataScore').value = '';
        }

        function render() {
            const container = document.getElementById('lessonContainer');
            const search = document.getElementById('search').value.toLowerCase();
            container.innerHTML = "";

            const filteredLessons = lessons.filter(l => l.title.toLowerCase().includes(search));

            if (filteredLessons.length === 0) {
                container.innerHTML = `<div class="text-center py-24 bg-white rounded-[3rem] border-4 border-dashed border-slate-100"><p class="text-slate-300 font-black text-2xl uppercase">á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á˜áŸášáŸ€á“</p></div>`;
                return;
            }

            filteredLessons.forEach(lesson => {
                const homeworks = subData.filter(s => s.parentId === lesson.id && s.type === 'assignment');
                const scores = subData.filter(s => s.parentId === lesson.id && s.type === 'score');

                const card = document.createElement('div');
                card.className = "lesson-card bg-white rounded-[2.5rem] p-8 shadow-sm border border-slate-50 flex flex-col gap-6";
                card.innerHTML = `
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-3">
                                    <span class="text-[10px] font-black bg-blue-900 text-white px-3 py-1 rounded-full uppercase">á˜áŸášáŸ€á“</span>
                                    <span class="text-[10px] font-bold text-slate-400 italic">${lesson.date}</span>
                                </div>
                                <h3 class="text-2xl font-black text-blue-950 mt-3">${lesson.title}</h3>
                            </div>
                            ${isTeacher ? `<button onclick="deleteItem(${lesson.id}, 'lesson')" class="p-3 text-red-400 hover:text-red-600 bg-red-50 rounded-xl hover:bg-red-100 transition-all">ğŸ—‘ï¸</button>` : ''}
                        </div>
                        <div class="mt-4"><a href="${lesson.link}" target="_blank" class="px-6 py-2.5 bg-slate-800 text-white rounded-xl text-xs font-bold shadow-md hover:bg-black">ğŸ“– á”á¾á€á˜á¾á›á¯á€áŸá¶ášá˜áŸášáŸ€á“</a></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8 pt-8 border-t border-slate-100">
                            <div class="bg-blue-50/50 rounded-3xl p-5 border border-blue-100/50">
                                <h4 class="text-sm font-black text-blue-900 mb-4">ğŸ“‚ á€á·á…áŸ’á…á€á¶ášá•áŸ’á‘áŸ‡ (${homeworks.length})</h4>
                                <div class="space-y-3">${homeworks.map(h => `
                                    <div class="bg-white p-4 rounded-2xl flex justify-between items-center shadow-sm">
                                        <div class="flex-1 pr-2"><p class="text-xs font-bold text-slate-700 truncate">${h.title}</p></div>
                                        <div class="flex items-center gap-2">
                                            <a href="${h.link}" target="_blank" class="px-3 py-1.5 bg-slate-100 text-slate-600 text-[9px] font-bold rounded-lg">á˜á¾á›</a>
                                            <button onclick="openSubmitModal(${lesson.id}, ${h.id}, '${h.title}')" class="px-3 py-1.5 bg-blue-100 text-blue-700 text-[9px] font-black rounded-lg hover:bg-blue-200">á”áŸ’ášá‚á›áŸ‹á€á·á…áŸ’á…á€á¶áš</button>
                                            ${isTeacher ? `<button onclick="deleteItem(${h.id}, 'sub')" class="text-red-300 ml-1 hover:text-red-500">âœ•</button>` : ''}
                                        </div>
                                    </div>`).join('') || '<p class="text-[10px] text-slate-400 italic text-center">á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á€á·á…áŸ’á…á€á¶áš</p>'}</div>
                            </div>
                            <div class="bg-amber-50/50 rounded-3xl p-5 border border-amber-100/50">
                                <h4 class="text-sm font-black text-amber-700 mb-4">ğŸ† á›á‘áŸ’á’á•á›/á–á·á“áŸ’á‘á»áŸá·áŸáŸ’áŸ (${scores.length})</h4>
                                <div class="space-y-3">${scores.map(s => `
                                    <div class="bg-white p-4 rounded-2xl flex justify-between items-center shadow-sm">
                                        <div class="flex-1 pr-2">
                                            <p class="text-xs font-black text-slate-700 truncate">${s.title}</p>
                                            ${s.link !== '#' ? `<a href="${s.link}" target="_blank" class="text-[8px] text-blue-500 underline">á˜á¾á›á€á·á…áŸ’á…á€á¶ášáŠáŸ‚á›á•áŸ’á‰á¾</a>` : ''}
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <span class="text-sm font-black text-amber-600">${s.score}</span>
                                            ${isTeacher ? `<button onclick="deleteItem(${s.id}, 'sub')" class="text-red-300 hover:text-red-500">âœ•</button>` : ''}
                                        </div>
                                    </div>`).join('') || '<p class="text-[10px] text-slate-400 italic text-center">á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á–á·á“áŸ’á‘á»</p>'}</div>
                            </div>
                        </div>
                    </div>`;
                container.appendChild(card);
            });
        }
        toggleInputs(); render();
    </script>
</body>
</html>